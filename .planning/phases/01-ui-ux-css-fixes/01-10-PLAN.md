---
phase: 01-ui-ux-css-fixes
plan: 10
type: execute
wave: 5
depends_on: ["09"]
files_modified:
  - frontend/src/components/EditUserModal.tsx
  - frontend/DESIGN_GUIDELINES.md
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Edit user modal delete button has trash can icon"
    - "DESIGN_GUIDELINES.md documents 5-layer rule and reset behavior"
  artifacts:
    - path: "frontend/src/components/EditUserModal.tsx"
      provides: "Delete button with trash icon"
      min_lines: 1
    - path: "frontend/DESIGN_GUIDELINES.md"
      provides: "5-layer rule and modal reset documentation"
      min_lines: 50
  key_links:
    - from: "EditUserModal delete button"
      to: "bi-trash icon"
      via: "icon class in button"
      pattern: "bi-trash"
    - from: "DESIGN_GUIDELINES.md"
      to: "5-layer reset rule"
      via: "documentation section"
      pattern: "reset.*modal|modal.*reset"
---

<objective>
Add trash icon to EditUserModal delete button and document 5-layer reset rule

Purpose: User reported "the only button thats wrong is the edit user menu the delete button needs to have the trash can icon". Also need to update DESIGN_GUIDELINES.md to document the 5-layer rule and modal reset behavior as requested by user.

Output: EditUserModal delete button has bi-trash icon; DESIGN_GUIDELINES.md has 5-layer reset rule documentation
</objective>

<execution_context>
@/home/vscode/.claude/get-shit-done/workflows/execute-plan.md
@/home/vscode/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-ui-ux-css-fixes/01-UAT.md
@.planning/phases/01-ui-ux-css-fixes/01-04-SUMMARY.md
@frontend/DESIGN_GUIDELINES.md

# Gap Context
Gap 14 from UAT: "Edit User Delete Button Missing Trash Can Icon"
- User reported: "the only button thats wrong is the edit user menu the delete button needs to have the trash can icon"
- Root cause: EditUserModal.tsx line 166 delete button lacks bi-trash icon class

Gap 10 from UAT: "Modals Should Follow 5-Layer Reset Rule"
- User request: "also maybe add the context to the frontend design document that the 5 layer rule exists and that if 5 layers are exceeded it just starts over again from the base 282828 layer"
- Need to document: 5-layer rule, modal reset behavior, and wrap-around rule

# Dependency Note
This is Wave 5 - depends on plan 01-09 (icon padding). Must run last as this plan modifies EditUserModal.tsx which has been modified in all previous gap closure plans, and includes documentation updates that should reflect all the changes made in earlier plans.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add trash icon to EditUserModal delete button</name>
  <files>frontend/src/components/EditUserModal.tsx</files>
  <action>
    Add bi-trash icon to the delete button in EditUserModal.tsx line ~162-168.

    Find the delete button (type="button" onClick={handleDelete}):
    Current structure:
    <button
      type="button"
      onClick={handleDelete}
      disabled={isCurrentUser || loading}
      className="px-4 py-2 bg-transparent text-red rounded font-medium hover:bg-bg2 hover:text-red-bright disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 cursor-pointer"
    >
      Delete
    </button>

    Change to (add icon before text):
    <button
      type="button"
      onClick={handleDelete}
      disabled={isCurrentUser || loading}
      className="px-4 py-2 bg-transparent text-red rounded font-medium hover:bg-bg2 hover:text-red-bright disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 cursor-pointer flex items-center gap-1.5"
    >
      <i className="bi-trash" />
      Delete
    </button>

    Added flex items-center gap-1.5 class for proper icon-text spacing, and bi-trash icon element.
  </action>
  <verify>grep -A2 "handleDelete" frontend/src/components/EditUserModal.tsx | grep -c "bi-trash" returns 1 (delete button has trash icon)</verify>
  <done>EditUserModal delete button displays bi-trash icon next to "Delete" text</done>
</task>

<task type="auto">
  <name>Task 2: Update DESIGN_GUIDELINES.md with 5-layer reset rule documentation</name>
  <files>frontend/DESIGN_GUIDELINES.md</files>
  <action>
    Add documentation for the 5-layer rule, modal reset behavior, and wrap-around rule to DESIGN_GUIDELINES.md.

    Add a new section after the "5-Color Gruvbox Layering Rule" section (after line ~33), or update the existing section to include:

    1. **Modal Reset Rule**: Document that modals reset to bg-bg2 (3rd layer) then follow 5-layer strategy
    2. **Wrap-Around Rule**: Document that if 5 layers are exceeded, it starts over from base bg-bg0 (282828)
    3. **Visual explanation**: Update the layer table to show modal reset behavior

    Insert after line 32 (after the table):
    ```markdown
    **Modal Reset Rule:**
    Modals reset to bg-bg2 (3rd layer) and follow the 5-layer strategy from there.
    This ensures modals stand out from the page while maintaining proper layering.

    **Wrap-Around Rule:**
    If 5 layers are exceeded in nested contexts, start over from base bg-bg0.
    Example: bg0 → bg1 → bg2 → bg3 → bg4 → bg0 → bg1 ...
    ```

    Also update the "Component Patterns > Modals" section (around line 337-356) to reflect bg-bg2 instead of bg-bg4:
    - Change "Modal content containers use **bg-bg4** (lightest layer)" to "Modal content containers use **bg-bg2** (modal reset rule)"
    - Update the example code to use bg-bg2 instead of bg-bg4

    Add around line 340:
    ```markdown
    **Modal Reset Rule:**
    Modals reset to bg-bg2 (3rd layer from base) instead of continuing as another layer.
    From bg-bg2, modal inputs use bg-bg3, nested containers use bg-bg4, etc.
    ```
  </action>
  <verify>grep -c "Modal Reset Rule\|Wrap-Around Rule\|starts over from base" frontend/DESIGN_GUIDELINES.md returns at least 3 (all new documentation sections added)</verify>
  <done>DESIGN_GUIDELINES.md documents 5-layer rule, modal reset behavior, and wrap-around rule</done>
</task>

</tasks>

<verification>
1. Run: grep -A5 "Delete" frontend/src/components/EditUserModal.tsx | grep "bi-trash" to verify delete button has trash icon

2. Run: grep -c "Modal Reset Rule\|wrap-around\|starts over from base" frontend/DESIGN_GUIDELINES.md returns at least 3

3. Run: npm run build to ensure no TypeScript errors

4. Manual check:
   - Open Edit User modal, verify delete button shows trash icon
   - Read DESIGN_GUIDELINES.md to verify new documentation sections are clear and accurate
</verification>

<success_criteria>
1. EditUserModal delete button has bi-trash icon with proper spacing
2. DESIGN_GUIDELINES.md has "Modal Reset Rule" section
3. DESIGN_GUIDELINES.md has "Wrap-Around Rule" section
4. Modal component pattern examples use bg-bg2 (not bg-bg4)
5. Build passes without errors
6. Documentation is clear and follows existing format
</success_criteria>

<output>
After completion, create `.planning/phases/01-ui-ux-css-fixes/01-10-SUMMARY.md`
</output>
